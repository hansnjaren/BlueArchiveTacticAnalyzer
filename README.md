# 블루 아카이브 택틱 분석기 (Blue Archive Tactic Analyzer, BATA)
BATA에는 현재 2개의 기능이 있습니다: (1) 택틱 타임라인 시각화 도구, (2) 데미지 계산기

## 택틱 타임라인 시각화 도구
이 기능은 `timeline.txt`에 입력한 택틱 타임라인을 시각화해줍니다. 만약 캐릭터 데이터가 `database` 디렉터리에 있는 JSON 파일에 입력되어있지 않다면 그 캐릭터는 생략될 것입니다. 만약 데이터베이스에 없는 캐릭터의 데이터가 있다면 자유롭게 PR해주시면 감사하겠습니다. 

데이터베이스의 모든 버프/디버프 지속 시간은 전무 1성 이하 기준으로 작성되어 있습니다. 그래서 만약 전무 2성 이상 육성 시 지속 시간이 늘어나는 서포터가 타임라인에 있는 경우 전무 2성 이상 여부를 답해야 합니다. 편의를 위해서 전무 2성 이상인 경우 강화 스킬(2스) 레벨이 10(MAX)라고 가정합니다. 

이 기능은 기존의 시각화 도구(유저가 직접 딜레이와 스킬 사용 시간을 구분하여 입력해야 하는 도구)와 택틱 파서(기존의 시각화 도구 입력값 생성에 도움을 주는 도구)의 기능을 합쳐서 만들어졌습니다. 이 두 도구 모두 `deprecated` 디렉터리에서 보존하고 있습니다. 

도구의 정상적인 작동을 위해서는 다음과 같은 형식으로 타임라인을 작성해야 합니다:

`mm:ss.000 캐릭터 > 대상`

이 형식 앞뒤의 부가 설명은 상관 없으나 이 형식 중간에는 시간과 캐릭터 사이의 닫는 괄호`)`를 제외하면 그 어떠한 부가적인 문구도 작성되면 안 됩니다. (`)`: 택틱을 `코스트 (mm:ss.000) 캐릭터 > 대상` 형태로 적는 경우를 위해 허용)

다음은 올바르게 작성된 타임라인 예시입니다:

``` 
5.7코 (03:18.700) C드히나 ON - (03:16.867) 드히나 1타>성배 - (03:14.367) 드히나 2타 - 5.2코 (03:11.067) 돌마리>성배 - (03:10.933) 드히나 3타 `2040만` - 6코 (03:06.400) 드아루 - 5.9코 (03:03.267) 리오
```

추가적으로 드히나의 경우 ON, 1타, 2타, 3타를 뒤에 붙여줘야 정상적으로 작동합니다. 

## 데미지 계산기
이 기능은 `dealdata.txt`에 입력한 값을 기준으로 딜러의 평균 데미지와 택틱 성공률(목표 딜량보다 더 많은 데미지를 넣을 확률)을 몬테 카를로 기법을 이용하여 계산합니다. 이를 위해서는 크리티컬 확률, 크리티컬 데미지 배율, 안정치, 공격의 일반 최대 데미지(크리티컬 X, 안정치 100%), 그리고 그 공격의 횟수를 입력해야 합니다. 

또한 남은 체력/깎인 체력 비례 딜러들의 딜량 또한 추정이 가능합니다. 이를 위해서 남은 체력(1)/깎인 체력(-1) 비례 여부, 비례 배율, 보스 최대 체력, 그리고 시작 체력을 입력해야 합니다. 다만 평균 데미지를 기준으로 평균 배율을 계산하여 모든 공격이 해당 배율로 적용된다고 근사하였기 때문에 정확하지 않을 수 있습니다. 
